{% extends "intiSoft/base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-offset-6 col-md-6">
        {% include "intiSoft/paginator.html" %}
    </div>
</div>
<div class="row">
    <div class="col-md-2">
        <a href="{% url 'adm:ofertatec-create' %}">
            <button type="button" class="btn btn-danger"
            {% if 'adm.add_ofertatec' not in user.get_all_permissions %}
            disabled
            {% endif %}>Crear</button>
        </a>
    </div>
    <div class="col-md-12">
        <table class="table table-hover table-pointer">
            <caption>Planilla de oferta tecnol√≥gica</caption>
            <thead>
                {% for name, label, options in fields %}
                    <td>
                        <div class="dropdown">
                            <span class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                               aria-expanded="false"> {{ label }}
                               <span class="caret"></span>
                            </span>
                            <ul id="{{'drop-'|add:forloop.counter}}" class="dropdown-menu">
                                <li><a name="order_by" href="{{ '?order_by='|add:name|add:'&'|add:request.GET.urlencode }}">Orden ascendente</a></li>
                                <li><a name="order_by" href="{{ '?order_by=-'|add:name|add:'&'|add:request.GET.urlencode }}">Orden descendente</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a onclick="seleccionar_todo(form_{{ name }})">Marcar todos</a></li>
                                <li><a onclick="deseleccionar_todo(form_{{ name }})">Desmarcar todos</a></li>
                                <li role="separator" class="divider"></li>
                                <input type="text" class="form-control cbSearch" id="{{name}}-search">
                                <form name="form_{{ name }}" class="form-contact" action="{% url 'adm:ofertatec-list' %}" method="GET">
                                    <div style="max-height:110px; overflow-y:auto">
                                        {% for option in options %}
                                             <div class="checkbox" style="padding-left:5%">
                                                <label><input type="checkbox" class="cb" name="{{ name }}" value="{{ option }}"
                                                {% if option|add:"_"|add:name in checked_fields %}checked{% endif %}> {{ option }} </label>
                                              </div>
                                        {% endfor %}
                                    </div>
                                    <br/>
                                    <button onclick="submitAll()" type="button" class="btn" style="border: 1px solid grey; margin-left:10px">
                                    Ok
                                </form>
                            </ul>
                        </div>
                    </td>
                {% endfor %}
                <td></td>
            </thead>
            <tbody>
                {% for ofertatec in ofertatec_list %}
                    <tr
                        {% if 'adm.change_ofertatec' in user.get_all_permissions %}
                            onclick="if (trlink) {location.href='{% url 'adm:ofertatec-update' ofertatec.id %}'}"
                        {% endif %}
                    >
                        <td>{{ ofertatec.proveedor }}</td>
                        <td>{{ ofertatec.codigo }}</td>
                        <td>{{ ofertatec.rubro }}</td>
                        <td>{{ ofertatec.subrubro }}</td>
                        <td>{{ ofertatec.tipo_servicio }}</td>
                        <td>{{ ofertatec.area }}</td>
                        <td>{{ ofertatec.detalle }}</td>
                        <td>{{ ofertatec.precio }}</td>
                        <td>{{ ofertatec.iem }}</td>
                        <td>
                            <button onclick="trlink=false;" title="Eliminar" data-action="Eliminar"
                                data-model="ofertatec" type="button" class="btn btn-default"
                                data-id={{ofertatec.id}} data-toggle="modal" data-target="#myModal">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"
                                {% if 'adm.delete_ofertatec' not in user.get_all_permissions %}
                                disabled
                                {% endif %}></span>
                            </button>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-md-offset-6 col-md-6">
        {% include "intiSoft/paginator.html" %}
    </div>
</div>
{% include "intiSoft/modals.html" %}
{% endblock %}



